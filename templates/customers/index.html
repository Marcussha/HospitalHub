{% extends ".\base.html" %}
  
{% block title %}Customer Information{% endblock title %}
  
{% block content %}
<section class="page-section" >
  <div class="container">
    {%if is_doctor or is_admin %}
    <span><a href="/customers/create" class="btn btn-primary">Create New</a></span>
      
      <h1>Customer Information</h1>

      <table class="table table-bordered" id="example" style="text-align: center;">
          <thead class="table success">
              <tr>
                  <th style="width: 20%;">Full Name</th>
                  <th style="width: 30%;">Email</th>
                  <th style="width: 10%;">Birthday</th>
                  <th style="width: 20%;">Address</th>
                  <th style="width: 15%;">Telephone</th>
                  <th style="width: 15%;">Sex</th>
              </tr>
          </thead> 

          <tbody>
              {% for client in clients %}
                <tr>
                    <td>{{ client.fullname }}</td>
                    <td>{{ client.email }}</td>
                    <td>{{ client.birthday }}</td>
                    <td>{{ client.address }}</td>
                    <td>{{ client.telephone }}</td>
                    <td>{{ client.sex }}</td>
                    <td><a href="customers/delete/{{ client.id }}" class="btn btn-danger">Delete</a></td>
                </tr>
              {% endfor %}
          </tbody>

      </table>
    {%endif%}
  </div>
</section>

<script>
    /*$(document).ready(function(){
        $('example thead tr')
          .clone(true)
          .addClass('filter')
          .appendTo('#example thead');
      
        var table = $('#example').DataTable({
          paging: true,
          pageLength: 10,
          lengthChange: true,
          autoWidth: false,
          searching: true,
          bInfo: true,
          bSort: true,
      
          initComplete: function(){
            var api = this.api();
            api.columns([0, 1, 2, 3, 4, 5]).eq(0).each(function(colIdx){
              var cell = $('.filter th').eq($(api.column(colIdx).header()).index());
              var title = $(cell).text();
              $(cell).html('<input type="text" placeholder="'+ title + '" /> ');
      
              $('input', $('.filters th').eq($(api.column(colIdx).header()).index()))
                .off('keyup change')
                .on('keyup change', function(e){
                  e.stopPropagation();
      
                  $(this).attr('title', $(this).val());
                  var regexr = '({search})';
      
                  var cursorPosition = this.selectionStart;
      
                  api.column(colIdx).search(
                    this.value != '' ? regexr.replace('{search}', '((('+ this.value +')))') : '',
                    this.value != '',
                    this.value == ''
                  ).draw();
      
                  $(this)
                    .focus()[0]
                    .setSelectionRange(cursorPosition,cursorPosition);
                });
            });
          },
          dom: 'lBfrtip',
          buttons: [
            {
              extend: 'copy',
              text: '<i class="fas fa-clone"></i> ',
              className: 'btn btn-secondary',
              titleAttr: 'Copy',
              exportOptions:{
                columns: [0, 1, 2, 3, 4, 5]
              }
            },
            {
              extend: 'excel',
              text: '<i class="fas fa-file-excel"></i>',
              className: 'btn btn-secondary',
              titleAttr: 'Excel', 
              exportOptions:{
                  columns: [0, 1, 2, 3, 4, 5]
                }
           },
           {
              extend: 'print',
              text: '<i class ="fas fa-print"></i>',
              className: 'btn btn-secondary',
              titleAttr: 'Print',
              exportOptions:{
                 columns: [0, 1, 2, 3, 4, 5]
                },
      
              customize: function( win ){
                  $(win.document.body).css('font-size', '10pt')
                  $(win.document.body).find('table')
                     .addClass('compact')
                     .css('font-size', 'inherit');
              }
           },
           {
              extend: 'pdf',
              text: '<i class="fas fa-file-pdf"></i>',
              className: 'btn btn-secondary',
              titleAttr: 'PDF',
              exportOptions:{
                   columns: [0, 1, 2, 3, 4, 5]
                },
         
              tableHeader: {
                  aligment:'center'
                },
      
              customize: function (doc){
                  doc.styles.tableHeader.aligment= "center";
                  doc.styles.tableBodyOdd.algment= "center";
                  doc.styles.tableBodyEven.algment= "center";
                  doc.styles.tableHeader.fontSize = 7;
                  doc.defaultStyle.fontSize = 6;
                  doc.content[1].table.width = Array(doc.content[1].table.body[1].length+1).join('*').split('');
                }
            },
            // ...các nút khác
          ]
        });
      
        var newSearch = $('#example').DataTable();
        $('#search').keyup(function(){
          newSearch.search($(this).val()).draw();
        });
      }); *\
</script>

{% endblock content %}
